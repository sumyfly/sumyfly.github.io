<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="technology, web, js">
<meta property="og:type" content="website">
<meta property="og:title" content="QSL">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="QSL">
<meta property="og:description" content="technology, web, js">
<meta property="og:locale">
<meta property="article:author" content="qsl">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>QSL</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-102260804-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-102260804-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">QSL</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/05/26/macOS%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/26/macOS%E7%BB%93%E6%9E%84/" class="post-title-link" itemprop="url">macOS结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-26 20:40:14 / Modified: 20:44:47" itemprop="dateCreated datePublished" datetime="2022-05-26T20:40:14+08:00">2022-05-26</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/05/26/macOS%E7%BB%93%E6%9E%84/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/05/26/macOS结构/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-macOS结构"><a href="#1-macOS结构" class="headerlink" title="1. macOS结构"></a>1. macOS结构</h3><p><img src="/images/macOS.webp" alt="macOS"></p>
<blockquote>
<p>Mac OS X 包含两个主要部分：以 FreeBSD 源代码 和 Mach 微核心为基础的 XUN 混合内核，并在 XNU 上构建的 Darwin 核心系统；及一个由苹果开发，称为 Aqua 的闭源、独占版权的图形用户界面。细分的看，Mac OS X 系统可以分成五层结构，每一层有其代表性技术。</p>
</blockquote>
<p>内核和设备服务层<br>内核和设备服务层：包括 XNU 内核、设备驱动和其他底层组件。XNU 是由苹果电脑发展的操作系统内核，被使用于 Mac OS X 中。它是 Darwin 操作系统的一部分，跟随着 Darwin 一同作为自由及开放源代码软件被发布。其中，XNU<br>是 X is Not Unix 的缩写。XNU 包括 Mach 和 BSD（libSystem）两个部分，最初版本的 XNU 是 Mach 2.5 版本和 BSD 4.3的混合，随着 OS X 的发布，Mach 版本升级到 3，BSD 部分被 FreeBSD 替代。</p>
<p>Mach<br>Mach 是一个由卡内基梅隆大学开发的计算机操作系统微内核， 是最早实现微内核操作系统的例子之一，也是许多其他相似的项目的标准。同 Unix 一样，Mach 系统也包含了一组丰富的实用工具，并保留了 Unix 中驱动程序的概念用以硬件交互。在 OS X 中，Mach 内核为系统提供了 64 内核和主要驱动支持。</p>
<p>BSD<br>伯克利软件套件（英语：Berkeley Software Distribution，缩写为 BSD），也被称为伯克利Unix（Berkeley Unix），是一个操作系统的名称，现在 BSD 也被用于称呼其衍生的各种套件。时至今日， OS X中的许多命令行工具还是来源于 BSD。在 OS X 中，文件系统、网络栈、IPC、通知机制的支持也来自 BSD。</p>
<p>核心系统层（Core OS）<br>核心系统层的技术和框架是硬件/网络相关的底层服务，这些服务是和内核特性直接相关的。包括以下组件和框架（不完全列举）：</p>
<p>安全措施：（为上层提供支持）包括Gatekeeper、APP 沙盒化、代码签名等。<br>Core OS 框架：包括磁盘管理、硬件加速、OpenCL、系统配置等。<br>Hypervisor：虚拟化支持。<br>核心服务层（Core service）<br>核心服务层和用户界面的应用程序没有直接联系，但是它们建立在内核和核心系统层上，为APP提供诸如数据处理、字符串控制、封装网络库等核心支持。包括以下组件和框架（不完全列举）：</p>
<p>iCloud 存储服务和 CloudKit<br>社交网络帐号：包括保存在 OS X 内的社交帐户的管理。<br>文件管理<br>本地化设置：语言、货币、日期和时间的格式化、编码、字体排版和渲染。<br>安全认证：包括本地账户、信任的证书、安全传输、密钥串访问等。<br>Time Machine 支持：OS X 的系统备份功能。<br>Bonjour：局域网下的设备发现服务，是打印机服务和局域网文件共享服务的基础。<br>XML 和 SQLite 支持：系统和 APP 的配置文件使用 XML 格式进行存储，数据使用 SQLite 格式进行保存。<br>Webkit: 允许 APP 进行网页渲染，具有 Web Core 和 JavaScript Core 两个部分。<br>快速预览：包括在 spotlight 中预览和空格键预览。<br>Store Kit: 为 Mac Appstore 和 iTunes 提供支持，处理相关请求。<br>Core Services Umbrella Framework：包括管理文件打开方式、MIME 支持、文件元数据管理、SearchKit 搜索支持、词典服务等。<br>Carbon: Carbon 也是 OS X 上的原生 API，也是 Core Services Umbrella Framework 的子集[4]，和 Cocoa 不同的是，Carbon是面向过程（Procedural）的编程语言API，也更加接近系统底层，可以使用包括 C 和 C++ 在内的多种编程语言进行开发，类似 Windows 的 win32 API。Carbon API 提供了良好的向下兼容性，为开发者快速将旧 MacOS 上的程序移植到 OS X 提供了便利，但是 Carbon 本身已经处于被苹果不建议使用的状态，也没有64位支持，在 OS X 10.8 后苹果没有对 Carbon 提供后续更新。<br>媒体层<br>媒体层负责音频、图像等多媒体文件的处理，2D 和 3D 图像的渲染，各种动画支持。</p>
<p>OpenGL ：OpenGL是一个定义了一个跨编程语言、跨平台的应用程序接口（API）的规范，它用于生成二维、三维图像。OpenGL本身与语言和平台无关，它将具体实现交给窗口系统，OS X 也提供了OpenGL 的实现。<br>Metal ：Metal 是一种面向底层的硬件加速 API，Metal 在单一 API 下提供了类似 OpenGL 和 OpenCL 的功能，旨在为提供和 Windows上Direct3D 12和跨平台的Vulkan相似的功能和特性。 从10.11开始在 OS X 上提供支持。<br>Quartz：Quartz 是 OS X 上的 UI 绘图层，由 Quartz Compositor（合成视窗系统，管理和合成幕后视窗视频来创建Mac OS X用户界面） 和 Quartz 2D（以PDF规范为基础的图形库，用来绘制二维文字和图形，现在被称为 Core Graphics）组成。<br>颜色管理<br>音视频文件解析：包括QuickTime Kit、Core Media 、Core Video等一系列多媒体处理框架。<br>字体渲染系统：包括 Cocoa Text 系统和Core Text。<br>图形用户界面（Cocoa 层）<br>图形用户界面层包括设计和用户交互的 UI、响应用户操作、管理程序的行为。</p>
<p>Aqua：Aqua 是承载于 Quartz 上的 GUI 系统和视觉主题，首次发布于2000年。<br>X11（XQuartz）: XQuartz 是 OS X 上 X窗口系统的一个实现，最初和 OS X 10.2 公开预览版一起提供，从 OS X 10.8 开始不随系统提供。<br>Spotlight：OS X 下的搜索工具。<br>Cocoa: Cocoa是 Mac OS X 上原生面向对象的编程环境，建立在 Quartz 上并由Objective-C语言编写，Cocoa 程序也主要使用Objective-C语言编写，但是通过桥接技术，也可以使用 JAVA、Python、Ruby 等语言开发 Cocoa 应用。Cocoa是典型的 MVC 模式。<br>Appkit：直接派生自NeXTSTEP的AppKit的。它包含了程序与图形用户界面交互所需的代码。<br>Foundation 工具包：首先出现在OpenStep中。在Mac OS X中，它是基于Core Foundation的。作为通用的面向对象的函数库，Foundation提供了字符串，数值的管理，容器及其枚举，分布式计算，事件循环，以及一些其它的与图形用户界面没有直接关系的功能。<br>Core Data：Core Data是Mac OS X中Cocoa API的一部分，它允许按照MVC模型组织APP的数据，并以XML，二进制文件或SQLite数据文件的格式将其序列化。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b684092e01b0">https://www.jianshu.com/p/b684092e01b0</a></p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>系统名称介绍<br>macOS，2012年前称之为Mac OS X，2012 - 2016年称OS X，2016年起称macOS，是苹果公司推出的图形用户界面操作系统。iOS，原名iPhone OS，后改为iOS。是苹果公司为移动设备所开发的移动操作系统。无论是iOS还是macOS,都是类Unix操作系统。</p>
<p>系统名词解释<br>在学习iOS、macOS系统结构时，如果没有充分的了解，常常会被一些名词给搞混，这里对一些不常用到的名词做一下解释。</p>
<p>Darwin<br>Darwin（达尔文）是苹果公司于2000年发布的一个开源操作系统，Darwin是macOS 和 iOS的一部分。可以将Darwin理解为操作系统的代号。Darwin由XNU和一些其他的Darwin库组成。</p>
<p>XNU<br>XNU是由苹果公司发布的操作系统内核，即Darwin的内核是XNU，是Darwin操作系统的一部分。除macOS外，XNU还是iOS、tvOS、watchOS操作系统的内核。XNU是X is not Unix的缩写。XNU包含三部分：Mach内核、BSD、I/O Kit。</p>
<p>Mach内核<br>XNU内核以一个被深度定制的Mach3.0内核作为基础。Mach是一个由卡内基梅隆大学开发的计算机操作系统微内核，主要是为了用于操作系统研究，特别是在分布式与并行运算上。XNU中的Mach所负责的功能非常少（核心功能），只能完成操作系统最基本的职责，比如任务调度、消息传递、进程间通信等。</p>
<p>BSD<br>BSD，伯克利软件套件（Berkeley Software Distribution）,也被称为伯克利Unix(Berkeley Unix)，是一个操作系统的名称。XNU中的BSD部分提供了POSIX应用程序接口（BSD系统称之为API）:进程模型、网络协议栈、虚拟文件系统等。</p>
<p>I/O Kit<br>I/O Kit是一个设备驱动框架，为开发者提供了开发设备驱动程序的API。</p>
<p>易混淆名词解释<br>除上面提到的名词外，还有一些易混淆的名词，这里也做一下解释。</p>
<p>用户体验层<br>用户体验层又被称为应用层，主要包括用户能够接触到的图形应用，如SprintBoard等。</p>
<p>应用框架层<br>应用框架层即Cocoa层，就是开发人员能够接触到的Cocoa等框架。</p>
<p>核心框架层<br>核心框架层包括各种核心架构、OpenGL等。</p>
<p>核心框架层、应用框架层、用户体验层均位于Darwin之上。</p>
<p>系统结构<br>根据官方文档介绍，整个系统可以分为上面提到的4个层次：Darwin、核心框架层、应用框架层、用户体验层。整个系统的结构可以表示为下图：</p>
<p>系统结构</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/05/17/React-Native%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/17/React-Native%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">React-Native性能优化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-17 17:54:18 / Modified: 18:42:41" itemprop="dateCreated datePublished" datetime="2022-05-17T17:54:18+08:00">2022-05-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index"><span itemprop="name">React-Native</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/05/17/React-Native%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/05/17/React-Native性能优化/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-大纲"><a href="#1-大纲" class="headerlink" title="1. 大纲"></a>1. 大纲</h3><h4 id="1-1-线程优化"><a href="#1-1-线程优化" class="headerlink" title="1.1 线程优化"></a>1.1 线程优化</h4><p>JS是单线程，不能block它，也不适合做CPU密集型工作。如果有可能尽量使用native模块或多线程技术负担JS线程工作。</p>
<h4 id="1-2-渲染优化"><a href="#1-2-渲染优化" class="headerlink" title="1.2 渲染优化"></a>1.2 渲染优化</h4><h5 id="1-2-1-React渲染"><a href="#1-2-1-React渲染" class="headerlink" title="1.2.1 React渲染"></a>1.2.1 React渲染</h5><ul>
<li>减少渲染次数， 比如shoudComponentUpdate, PureComponent</li>
<li>避免不可见内容的渲染，比如控制render的返回内容</li>
<li>长列表的优化</li>
</ul>
<h5 id="1-2-2-Native渲染"><a href="#1-2-2-Native渲染" class="headerlink" title="1.2.2 Native渲染"></a>1.2.2 Native渲染</h5><ul>
<li>Android上RecycleView2的使用</li>
</ul>
<h4 id="1-3-框架优化"><a href="#1-3-框架优化" class="headerlink" title="1.3 框架优化"></a>1.3 框架优化</h4><h4 id="1-3-1-通讯方法"><a href="#1-3-1-通讯方法" class="headerlink" title="1.3.1 通讯方法"></a>1.3.1 通讯方法</h4><ul>
<li>JS Bridge的通讯的payload是JSON字符串，而且所有通讯都是占用JS Bridge，所以一方面会出现阻塞，比如滑动事件，另一方面JSON字符串的解析也会消耗计算。所以尽量不要在JS Bridge上发太多消息。随着JSI的发布，可以使用JSI代替JS Bridge, 它不需要再通过JSON字符串通讯，而是使用了共享内存通讯，而且是同步方式，效率更高。跟之前相比，需要写C++代码，但是有自动化工具可以帮助完成，比如CodeGen。</li>
<li>Bundel拆包，按需加载，和提前加载，提升页面首次渲染的性能。</li>
<li>体积优化，使用混淆工具减少包体积。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/22/K8s/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/22/K8s/" class="post-title-link" itemprop="url">K8s</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-04-22 14:03:00 / Modified: 14:03:16" itemprop="dateCreated datePublished" datetime="2022-04-22T14:03:00+08:00">2022-04-22</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/04/22/K8s/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/04/22/K8s/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-Limits"><a href="#1-Limits" class="headerlink" title="1. Limits"></a>1. Limits</h3><p>资源限制内部机制使用的是cgroup类型<br>目录： /sys/fs/cgroup/systemd</p>
<p>k8s采用request和limit两种限制类型来对资源进行分配</p>
<p>request(资源需求)：即运行pod的节点必须满足运行pod的最基本需求才能运行pod。<br>limit(资源限制)：即运行pod期间，可能内存使用量会增加，那最多能使用多少内存，这就是资源限额。<br>资源类型：</p>
<p>CPU的单位是核心数，内存的单位是字节。<br>一个容器申请0.5各CPU，就相当于申请1个CPU的一半，可以加个后缀m表示千分之一的概念。比如说100m的CPU，100豪的CPU和0.1个CPU都是一样的。<br>内存单位：</p>
<p>K，M，G，T，P，E #通常是以1000为换算标准的。<br>Ki，Mi，Gi，Ti，Pi，Ei #通常是以1024为换算标准的。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/04/22/K8s/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/21/%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/21/%E7%BD%91%E7%BB%9C/" class="post-title-link" itemprop="url">网络</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-04-21 13:08:16 / Modified: 14:45:12" itemprop="dateCreated datePublished" datetime="2022-04-21T13:08:16+08:00">2022-04-21</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/04/21/%E7%BD%91%E7%BB%9C/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/04/21/网络/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-TLS"><a href="#1-TLS" class="headerlink" title="1. TLS"></a>1. TLS</h3><p>TLS现在的版本是1.2，下一个版本1.3也快普及。<br>Android开始支持TLS v1.2从Android 4.1开始<br>iOS开始支持TLS v1.2从iOS 5开始<br>Browser开始支持TLS v1.2: Chrome version 29(2013), Safari version 7(2013)</p>
<p>通常TLS是应用协议，HTTP on SSL，所以一般情况下不需要应用程序去指定TLS版本，交给系统或浏览器就行。</p>
<p>ref:<br><a target="_blank" rel="noopener" href="https://developer.android.com/reference/javax/net/ssl/SSLSocket">Android</a><br><a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/technotes/tn2287/_index.html">iOS</a><br><a target="_blank" rel="noopener" href="https://afba.secure.force.com/MemberPortal/TLSVPage">Browser</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/04/21/%E7%BD%91%E7%BB%9C/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/26/node%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/26/node%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/" class="post-title-link" itemprop="url">node内存泄漏</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-26 12:57:23" itemprop="dateCreated datePublished" datetime="2022-03-26T12:57:23+08:00">2022-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-30 14:38:41" itemprop="dateModified" datetime="2022-03-30T14:38:41+08:00">2022-03-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Node/" itemprop="url" rel="index"><span itemprop="name">Node</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/03/26/node%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/03/26/node内存泄漏/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-Heap"><a href="#1-Heap" class="headerlink" title="1. Heap"></a>1. Heap</h3><p>Heap 分为young generation, old generation.</p>
<ul>
<li>young generation, 采用清除算法，分为from, to两个区域。当需要GC时，会检测分配的对象的有效性，如果从这次GC中存活，会标记，然后copy到to 区域，清空from区，然后交换from, to的命名。当有对象在2次GC都存活了，那么会移动到old generation.这个也被称为minor GC.</li>
<li>old generation, 采用mark-sweep方法, old generation中allocate分配容易，清理难。这个也被称为major GC。这里的GC也有两种可能，一种是内存充裕时使用mark-sweep, 另一种是内存不充足时内存压塑，移动内存，释放内存碎片。</li>
</ul>
<p>Usually, ~20% of the Young Generation survives into the Old Generation. Collection in the Old Space will only commence once it is getting exhausted. To do so the V8 engine uses two different collection algorithms:</p>
<ul>
<li>Scavenge collection, which is fast and runs on the Young Generation,</li>
<li>Mark-Sweep collection, which is slower and runs on the Old Generation.</li>
</ul>
<p>node GC时会stop the world，代表主线程被暂停了。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/03/26/node%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/10/Chrom%E6%8F%92%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/10/Chrom%E6%8F%92%E4%BB%B6/" class="post-title-link" itemprop="url">Chrom插件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-03-10 11:16:29 / Modified: 11:19:47" itemprop="dateCreated datePublished" datetime="2022-03-10T11:16:29+08:00">2022-03-10</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/03/10/Chrom%E6%8F%92%E4%BB%B6/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/03/10/Chrom插件/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-ADBlock-Plus"><a href="#1-ADBlock-Plus" class="headerlink" title="1. ADBlock Plus"></a>1. ADBlock Plus</h3><p>对于国内广告有时不work，那么就需要设置下语言。这个语言按照需要，设多了会影响ADBlock Plus的速度。所以我只需要设两个Chian+English.<br><img src="/images/tool/adblock.jpg" alt="Settigns"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/03/10/Chrom%E6%8F%92%E4%BB%B6/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/07/Redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/07/Redux/" class="post-title-link" itemprop="url">Redux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-07 16:37:44" itemprop="dateCreated datePublished" datetime="2022-03-07T16:37:44+08:00">2022-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-29 11:55:41" itemprop="dateModified" datetime="2022-04-29T11:55:41+08:00">2022-04-29</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/03/07/Redux/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/03/07/Redux/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-Redux"><a href="#1-Redux" class="headerlink" title="1. Redux"></a>1. Redux</h3><p>Redux createStore三个主要的属性和方法是{store, getState, dispatch}。createStore是创建一个Redux Store, store是这个Redux Store的引用，getState是返回全局的State, dispatch是发送一个Action. 这个全局State对于JS来说是plain object，每次dispatch都会创建一个新的object，而redux-immutable会使用原来的Immutale Map引用。</p>
<p>其它一些辅助方法：<br>combineReducers(reducers), 这个是把reducersMap变成一个大reducer object.它接受一个Action和当前State, 然后遍历所有的reducer(这里可能会有性能问题，试想一千个reducer，会影响性能)。</p>
<ul>
<li>createStore的第一个参数就是combineReducers(reducers)返回的结果, 内部创建一个currentState, finalReducers, dispatch方法。State的key就是reducers的key, 在createStore内部，store创建好之后会dispatch 当ActionTypes.INIT，这个会在finalReducers里面运行一次，由于这个时候全局State是undefined，所以会使用reducers的defaultState，这里也就解释为什么reducers的defaultState要和reducers的key(reducers的name)一样。</li>
</ul>
<blockquote>
<p>Action是一个Object,它包含type, payload（自定义的负荷）. ActionTypes.INIT， 是Redux自带的Action，它的type其实是一个随机生成的字符串。我们不该针对这个ActionTypes.INIT写任何的reducer。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ActionTypes</span> = &#123;</span><br><span class="line">  <span class="attr">INIT</span>: <span class="string">`@@redux/INIT<span class="subst">$&#123;/* #__PURE__ */ randomString()&#125;</span>`</span>,</span><br><span class="line">  <span class="attr">REPLACE</span>: <span class="string">`@@redux/REPLACE<span class="subst">$&#123;/* #__PURE__ */ randomString()&#125;</span>`</span>,</span><br><span class="line">  <span class="attr">PROBE_UNKNOWN_ACTION</span>: <span class="function">() =&gt;</span> <span class="string">`@@redux/PROBE_UNKNOWN_ACTION<span class="subst">$&#123;randomString()&#125;</span>`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">combination</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="comment">// dispatch 当ActionTypes.INIT 的时候，state是undefined, 所以这里使用了函数默认值&#123;&#125;.</span></span></span><br><span class="line"><span class="params">    state: StateFromReducersMapObject&lt;<span class="keyword">typeof</span> reducers&gt; = &#123;&#125;,</span></span><br><span class="line"><span class="params">    action: AnyAction</span></span><br><span class="line"><span class="params">  </span>) &#123;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> hasChanged = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">nextState</span>: <span class="title class_">StateFromReducersMapObject</span>&lt;<span class="keyword">typeof</span> reducers&gt; = &#123;&#125;</span><br><span class="line">    <span class="comment">// 遍历所有的Reducer</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; finalReducerKeys.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> key = finalReducerKeys[i]</span><br><span class="line">      <span class="comment">// 获取一个reducer方法</span></span><br><span class="line">      <span class="keyword">const</span> reducer = finalReducers[key]</span><br><span class="line">      <span class="comment">// 获取当前的shape (某个reducer key下面的值)</span></span><br><span class="line">      <span class="keyword">const</span> previousStateForKey = state[key]</span><br><span class="line">      <span class="comment">// reduxer都会运行一次, 除非报错</span></span><br><span class="line">      <span class="comment">// 当接受ActionTypes.INIT时，previousStateForKey是个undefined，所以reducer里面返回的是reducer的defaultState。 </span></span><br><span class="line">      <span class="keyword">const</span> nextStateForKey = <span class="title function_">reducer</span>(previousStateForKey, action)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> nextStateForKey === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> actionType = action &amp;&amp; action.<span class="property">type</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 改写下个shape (某个reducer key下面的值)</span></span><br><span class="line">      nextState[key] = nextStateForKey</span><br><span class="line">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 监测至少有一次变化</span></span><br><span class="line">    hasChanged =</span><br><span class="line">      hasChanged || finalReducerKeys.<span class="property">length</span> !== <span class="title class_">Object</span>.<span class="title function_">keys</span>(state).<span class="property">length</span></span><br><span class="line">    <span class="keyword">return</span> hasChanged ? nextState : state</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>createStore的第二个参数时initialState，它的值要和reducer的key一样。它会和Reducer产生的State做hydrate。</li>
</ul>
<blockquote>
<p>Redux中函数默认值的使用很广泛，第一重要的就是reducers中函数默认值defaultState的使用，然后是createStore中initialState的使用。createStore中初始化Reduxt的Gloabal State就是用到了上面两个函数默认值。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/03/07/Redux/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/02/20/Tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/20/Tools/" class="post-title-link" itemprop="url">Tools</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-20 18:21:05" itemprop="dateCreated datePublished" datetime="2022-02-20T18:21:05+08:00">2022-02-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-08 17:34:30" itemprop="dateModified" datetime="2022-03-08T17:34:30+08:00">2022-03-08</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/02/20/Tools/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/02/20/Tools/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-ngrok"><a href="#1-ngrok" class="headerlink" title="1. ngrok"></a>1. ngrok</h3><p>内网穿透到internet, 方便本地调试，但同时也需要一个外网链接地址，比如调试webhook。这个外网链接地址支持HTTP与HTTPS。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install ngrok/ngrok/ngrok</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/02/20/Tools/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/02/16/Android%E6%80%A7%E8%83%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/16/Android%E6%80%A7%E8%83%BD/" class="post-title-link" itemprop="url">Android性能</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-02-16 16:21:21 / Modified: 16:22:08" itemprop="dateCreated datePublished" datetime="2022-02-16T16:21:21+08:00">2022-02-16</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/02/16/Android%E6%80%A7%E8%83%BD/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/02/16/Android性能/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Performance-Metrics"><a href="#Performance-Metrics" class="headerlink" title="Performance Metrics"></a>Performance Metrics</h3><ul>
<li>FPS</li>
<li>Memory</li>
<li>CPU
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/02/16/Android%E6%80%A7%E8%83%BD/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/01/09/JSI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="technology, web, js">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/09/JSI/" class="post-title-link" itemprop="url">JSI</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-01-09 17:00:02 / Modified: 17:01:07" itemprop="dateCreated datePublished" datetime="2022-01-09T17:00:02+08:00">2022-01-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index"><span itemprop="name">React Native</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2022/01/09/JSI/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/01/09/JSI/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>The current React Native Bridge architecture between Native and JS works asynchronously and transfer data in JSON only.</p>
<p>It produces next issues:</p>
<p>Async calls</p>
<p>Many threads and jumps across them: JS, Shadow, Main, Native…<br>JS and Main threads do not directly communicate (slow UI rendering)<br>JSON</p>
<p>No data sharing between JS and Native threads<br>Slow data transfer because of JSON serialisation (bottleneck)<br>You can make the bridge to any native code Java/Konlin, ObjC/Swift, C++ etc. but you always have the problems from above.</p>
<p>React Native JSI provides API to JS Runtime engine and allows to expose native functions and objects to JS directly - no bridge at all.</p>
<p>It provides next advantages:</p>
<p>Sync call from JS thread to Native and vice-versa<br>Fast rendering using direct call to UI Main thread<br>Data sharing between threads<br>You have to use C++ only to work with JSI because JS Runtime has C++ API but it is possible to make C++ layer between JSI and your existed Java or Swift code.</p>
<p>JSI is foundation for future new React Native architecture which includes: Fabric, TurboModules, CodeGen. Read more: <a target="_blank" rel="noopener" href="https://github.com/react-native-community/discussions-and-proposals/issues/91">https://github.com/react-native-community/discussions-and-proposals/issues/91</a></p>
<p>Share<br>reference:<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/69501535/whats-the-difference-between-bridging-a-module-with-c-or-with-jsi-in-react-na">https://stackoverflow.com/questions/69501535/whats-the-difference-between-bridging-a-module-with-c-or-with-jsi-in-react-na</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="qsl"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">qsl</p>
  <div class="site-description" itemprop="description">technology, web, js</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qsl</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://edwardqian.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
