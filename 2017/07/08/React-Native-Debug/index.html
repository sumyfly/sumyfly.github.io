<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="debug,react-native," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="1. Image overflowImage是可以overflow:display,这个在android和ios都有效果。而View在android上不可以overflow:display的。">
<meta name="keywords" content="debug,react-native">
<meta property="og:type" content="article">
<meta property="og:title" content="React-Native-Debug">
<meta property="og:url" content="http://yoursite.com/2017/07/08/React-Native-Debug/index.html">
<meta property="og:site_name" content="QSL">
<meta property="og:description" content="1. Image overflowImage是可以overflow:display,这个在android和ios都有效果。而View在android上不可以overflow:display的。">
<meta property="og:updated_time" content="2018-09-06T05:17:37.862Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React-Native-Debug">
<meta name="twitter:description" content="1. Image overflowImage是可以overflow:display,这个在android和ios都有效果。而View在android上不可以overflow:display的。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/07/08/React-Native-Debug/"/>





  <title>React-Native-Debug | QSL</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-102260804-1', 'auto');
  ga('send', 'pageview');
</script>











</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">QSL</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/08/React-Native-Debug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qsl">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QSL">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">React-Native-Debug</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-08T22:28:36+08:00">
                2017-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React-Native</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/07/08/React-Native-Debug/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/07/08/React-Native-Debug/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="1-Image-overflow"><a href="#1-Image-overflow" class="headerlink" title="1. Image overflow"></a>1. Image overflow</h3><p>Image是可以overflow:display,这个在android和ios都有效果。而View在android上不可以overflow:display的。</p>
<a id="more"></a>
<h3 id="2-flex-layout"><a href="#2-flex-layout" class="headerlink" title="2. flex layout"></a>2. flex layout</h3><h4 id="2-1-yoga"><a href="#2-1-yoga" class="headerlink" title="2.1 yoga"></a>2.1 yoga</h4><p>RN使用的layout引擎是yoga，<a href="https://github.com/facebook/yoga，" target="_blank" rel="external">https://github.com/facebook/yoga，</a> 跨平台的，实现flexbox。<br>RN默认是display:flex，block和inner-block都是有效的，in-line无效。</p>
<h4 id="2-2-BFC"><a href="#2-2-BFC" class="headerlink" title="2.2 BFC"></a>2.2 BFC</h4><p>BFC blcok Formatting Context，这个文档流是相互隔离的盒子，所以margin不会合并而是并加，<br>这个可以都能通过overflow:hidden来设置，其实设置方式有很多，满足以下条件的任何一条都是BFC</p>
<ul>
<li>float不为none</li>
<li>position 的值不为 static 或者 relative</li>
<li>display 的值为 table-cell , table-caption , inline-block , flex , 或者 inline-flex 中的其中一个</li>
<li>overflow 的值不为 visible</li>
</ul>
<p>RN默认IOS overflow:visiable, Android是overflow:hidden，但是它们都是display:flex, 所以都是用的BFC，相互隔离的盒子。<br><a href="https://segmentfault.com/a/1190000009139500" target="_blank" rel="external">https://segmentfault.com/a/1190000009139500</a></p>
<h4 id="2-3-RN-CSS继承"><a href="#2-3-RN-CSS继承" class="headerlink" title="2.3 RN CSS继承"></a>2.3 RN CSS继承</h4><p>注意：CSS都是强制继承的，但是RN不是。React Native still has the concept of style inheritance, but limited to text subtrees.RN的继承只有Text。</p>
<h4 id="2-4-RN-flex"><a href="#2-4-RN-flex" class="headerlink" title="2.4 RN flex"></a>2.4 RN flex</h4><p>flex在网页CSS中是flex-grow,flex-shrink,flex-basis的简写，默认值是0 1 auto，后两个属性可选；RN中flex是布局用</p>
<p>宽高度应该是确定的，或者是可以推断的，如子节点宽高度，父容器宽高度。如果父节点、子节点皆不能推断，那么显示就会不确定，有问题。</p>
<h5 id="2-4-1父节点-gt-子节点"><a href="#2-4-1父节点-gt-子节点" class="headerlink" title="2.4.1父节点-&gt;子节点"></a>2.4.1父节点-&gt;子节点</h5><p>1)子节点如果没有设置(alignItems,justifyContent），那么宽度为其父节点宽度,高度由内容决定。<br>2)子节点如果设置了(alignItems,justifyContent），那么宽高度为其内容宽高度。<br>3)子节点设置了宽高度，那么以此宽高度为准。</p>
<h5 id="2-4-2-父节点flex-1"><a href="#2-4-2-父节点flex-1" class="headerlink" title="2.4.2 父节点flex:1"></a>2.4.2 父节点flex:1</h5><p>1)如果父节点flex:1不能推断大小，那么子节点flex:1也没有效果</p>
<h5 id="2-4-3-父节点absolute-子节点flex-1"><a href="#2-4-3-父节点absolute-子节点flex-1" class="headerlink" title="2.4.3 父节点absolute,子节点flex:1"></a>2.4.3 父节点absolute,子节点flex:1</h5><p>如果父节点是position:absolute,那么子元素忽视flex:1</p>
<h4 id="2-5-style覆盖"><a href="#2-5-style覆盖" class="headerlink" title="2.5 style覆盖"></a>2.5 style覆盖</h4><p>flex：1会覆盖width,height设置。</p>
<p>marginTop，mrginBootom 会覆盖marginVertical；marginLeft, marginRight会覆盖marginHorizontal;<br>paddingTop, paddingBottom会覆盖paddingVertical;paddingLeft, paddingRight会覆盖paddingHorizontal。</p>
<h3 id="3-postion-absolute"><a href="#3-postion-absolute" class="headerlink" title="3. postion:absolute"></a>3. postion:absolute</h3><p>position:absolute不在flow中，忽视flex:1布局。其位置,大小由left,right,top,bottom设置，大小也可以由内容大小确定。</p>
<h3 id="4-Text"><a href="#4-Text" class="headerlink" title="4. Text"></a>4. Text</h3><p>如果元素为Text，其内容过长，并不会换行，而是一直显示下去。如果设置了宽度，或者推断出宽度，那么就会换行。</p>
<h3 id="5-borderRadius"><a href="#5-borderRadius" class="headerlink" title="5. borderRadius"></a>5. borderRadius</h3><p>有时候borderRadius设置了，但是只有下半部份有效果，那么设置一下overflow:hidden</p>
<h3 id="6-setState"><a href="#6-setState" class="headerlink" title="6. setState"></a>6. setState</h3><p>setState是异步的，在contructor里面初始化this.state={…},然后紧接着设置setState,那么可能初始化值覆盖了后面的setState，所以setState这里并不可靠。放到didMount里面去设置。</p>
<h3 id="7-ListView-中的onEndReached"><a href="#7-ListView-中的onEndReached" class="headerlink" title="7. ListView 中的onEndReached"></a>7. ListView 中的onEndReached</h3><p>不能设置contentContainerStyle,不然onEndReached不能再安卓上正确触发(初始化后的第一个onEndReached不能fired)。</p>
<h3 id="8-子组件和父组件通讯问题"><a href="#8-子组件和父组件通讯问题" class="headerlink" title="8.子组件和父组件通讯问题"></a>8.子组件和父组件通讯问题</h3><p>如果使用ref,那么还可以用state来保证同步状态。如果用this.xx的私有变量，不能保证同步状态。因为显示的时候，可能在diff后不去更换控件，而私有变量就算变化了，也不能取到。<br>继续讨论： 我觉得使用ref还是可能会出问题，我应该传props去子控件，那样会保证状态是父组件可以预料的。</p>
<h3 id="9-ref调用共有方法"><a href="#9-ref调用共有方法" class="headerlink" title="9.ref调用共有方法"></a>9.ref调用共有方法</h3><p>如果使用ref调用子控件的共有方法，那么可以不用bind(this)到子控件。在render函数中调用也不需要bind(this)，但是回调函数需要bind(this)。</p>
<h3 id="10-继承和组合"><a href="#10-继承和组合" class="headerlink" title="10.继承和组合"></a>10.继承和组合</h3><p>实际项目中，使用了普通类作为Model，里面有函数来渲染一些组件，它继承自普通父类，而不是Component。像这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//应该使用Componet， extends Conponet</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span></span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubModel</span> <span class="keyword">extends</span> <span class="title">Model</span></span>&#123;</div><div class="line">  validated()&#123;</div><div class="line">    <span class="comment">//.....</span></div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// or false</span></div><div class="line">  &#125;</div><div class="line">  renderComponent()&#123;</div><div class="line">    reutnr (&lt;ValidatedComponent&gt;</div><div class="line">    //....</div><div class="line">    &lt;/ValidatedCoponent&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">Component</span>&lt;<span class="title">Props</span>,<span class="title">State</span>&gt;</span>&#123;</div><div class="line">  render()&#123;</div><div class="line">    Model model = <span class="keyword">new</span> SubModel()</div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      &lt;View&gt;</div><div class="line">      &#123;model.renderComponent()&#125;</div><div class="line">      &lt;/View&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样导致的结果是，在容器redner中初始化后，其组件的state与从外部获取不匹配，是因为diff时发现组件props没变，所以没有用刚刚初始化状态的组件替代。所以要加上props传到组件中，并且加上key，这样还不如用Componet的组件保存数据和状态。（如果是Componet那么还有另外一个方法是用componentWillReceiveProps中去判断某个props改变了，然后setState.）<br>教训：<br>1.如果没有渲染，使用普通类型，如果涉及到渲染UI，使用Compoent<br>2.优先使用props从父组件往下传递，包括回调函数，而不是this.ref.xx直接调用公开方法<br>共享功能时组合和继承选择？<br>1.is A 继承， has A 组合。<br>2.主动调用方法用继承（依赖构造函数传属性），回调方法用组合（用props传入更加方便）。</p>
<h3 id="11-requestAnimationFrame"><a href="#11-requestAnimationFrame" class="headerlink" title="11.requestAnimationFrame"></a>11.requestAnimationFrame</h3><p>使用requestAnimationFrame要注意，在componentWillReceiveProps中,不要使用requestAnimationFrame中setState，因为此时可能导致这个setState在render之后，导致多了一次render，所以在componentWillReceiveProps中，不使用requestAnimationFrame中setState。也就是说不用requresAnimationFrame, setState会延迟渲染，等待此state更新成功。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">componentWillReceiveProps(nextProps) &#123;</div><div class="line">   <span class="keyword">if</span> (!nextProps.refreshing &amp;&amp; <span class="keyword">this</span>.props.rowSource != nextProps.rowSource) &#123;</div><div class="line">       <span class="comment">// requestAnimationFrame(() =&gt; &#123; //不要加上这个，否则导致额外的render</span></div><div class="line">         <span class="keyword">this</span>.setState(&#123; <span class="attr">showActivityIndicator</span>: <span class="literal">true</span> &#125;)</div><div class="line">       <span class="comment">// &#125;)</span></div><div class="line">   &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h3 id="12-gitignore"><a href="#12-gitignore" class="headerlink" title="12. .gitignore"></a>12. .gitignore</h3><p>.gitignore 没有起效，是因为我使用了 import ‘../../smile-shared/xx’ 应该是使用 ‘smile-shared/xxx’,这个是引用的问题，tsc运行时，output结果错误。</p>
<h3 id="13-import-require外部文件"><a href="#13-import-require外部文件" class="headerlink" title="13. import require外部文件"></a>13. import require外部文件</h3><p>web在src文件夹里面的文件，不可以import那些在src外的其它文件，但是可以用require。比如在src文件夹外面的libs文件夹。</p>
<h3 id="14-Text-布局"><a href="#14-Text-布局" class="headerlink" title="14. Text 布局"></a>14. Text 布局</h3><h3 id="14-1-Text-宽度"><a href="#14-1-Text-宽度" class="headerlink" title="14.1 Text 宽度"></a>14.1 Text 宽度</h3><p>Text如果不设置宽度，默认是一直延伸的，不会换行。默认占满容器宽度。可以设置固定宽度，或flex:1，或给它容器设置可计算宽度。</p>
<h4 id="14-2-Text中嵌套View-要设置width-height"><a href="#14-2-Text中嵌套View-要设置width-height" class="headerlink" title="14.2 Text中嵌套View,要设置width,height"></a>14.2 Text中嵌套View,要设置width,height</h4><p>在Text中的嵌套View,Image都要设置width,height。可能是因为Text的样式会继承。</p>
<h4 id="14-3-Text在View中布局"><a href="#14-3-Text在View中布局" class="headerlink" title="14.3 Text在View中布局"></a>14.3 Text在View中布局</h4><p>Text如果不设置宽度，会导致在flexDirection:row中，计算错误，会穿透本组件，到上一层容器(换行位置不对)。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;View style=&#123;&#123;flexDirection: 'row'&#125;&#125;&gt;</div><div class="line">  &lt;Text style=&#123;&#123;marginRight: 3&#125;&#125;&gt;Title&lt;/Text&gt;</div><div class="line">  &lt;Text &gt;This is a long contetn.&lt;/Text&gt;</div><div class="line">&lt;/View&gt;</div></pre></td></tr></table></figure>
<h3 id="15-yield"><a href="#15-yield" class="headerlink" title="15. yield"></a>15. yield</h3><p> 调用generator时，没有yield会造成generator没有预期行为，比如直接使用saga effects的call没有阻塞调用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; takeLatest, delay &#125; <span class="keyword">from</span> <span class="string">'redux-saga'</span></div><div class="line"><span class="keyword">import</span> &#123; put, call, fork, take, race, select &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">mySaga</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">yield</span> call(delay, <span class="number">1000</span>) <span class="comment">// don't less yield call(delay, 1000)</span></div><div class="line">&#125;</div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line"></div><div class="line">### 16. RCTNativeAppEventEmitter vs DeviceEventManagerModule.RCTDeviceEventEmitter</div><div class="line">RN中这两个Emitter应该没什么区别，我没有接受到消息，是因为我拼写中大小写有错误，浪费时间在寻找这两个Emitter区别。</div><div class="line">`<span class="string">``</span> java</div><div class="line">  private <span class="keyword">static</span> final <span class="built_in">String</span> RCTInmobiEventName = <span class="string">"Inmobi_Resp"</span>;</div></pre></td></tr></table></figure></p>
<h3 id="17-moment-format-‘M-D’"><a href="#17-moment-format-‘M-D’" class="headerlink" title="17. moment format ‘M-D’"></a>17. moment format ‘M-D’</h3><p>在排序时，没有考虑跨年的问题，只是按’M-D’排序，应该按’YYYY-M-D’排序。</p>
<h3 id="18-键盘"><a href="#18-键盘" class="headerlink" title="18. 键盘"></a>18. 键盘</h3><p>RN的键盘输入，比较麻烦，不是很方便。</p>
<ul>
<li>android 用padding， ios用position。</li>
<li>padding是在后面添加一个键盘的高度，position应该是修改了position。所以padding在一个高度固定的View中，而不是ScrollView，就需要考虑控件后面的空白问题。</li>
<li>安卓计算Modal的flex:1时，扣除了键盘高度，IOS没有扣除键盘高度。</li>
</ul>
<blockquote>
<p>如果焦点变化了，并且当前焦点不可以输入，键盘自动隐藏。就像<code>this._textInput.blur()</code>这样。</p>
<p>如果使用KeyboardAvoidingView behavior=’padding’,它的容器高度可能会变化，比如Modal，那么在ScrollView中，并且顶部有个flex:1的View，它的高度包含了键盘高度。需要去掉这个高度，使用<code>View</code>包含它，这个其实就是不需要KeyboardAvoidingView了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">renderContent() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;KeyboardAvoidingView behavior=&#123;IsAndroid ? 'padding' : 'position'&#125;&gt;</div><div class="line">        &#123;this.renderFooter()&#125;</div><div class="line">      &lt;/KeyboardAvoidingView&gt;</div><div class="line">    )</div><div class="line">&#125;</div><div class="line">render ()&#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">      &lt;Modal</div><div class="line">        visible=&#123;fullType == currentModal&#125;</div><div class="line">        animationType="fade"</div><div class="line">        transparent=&#123;true&#125;</div><div class="line">        onRequestClose=&#123;() =&gt; this.closeModal()&#125;&gt;</div><div class="line">        &lt;View style=&#123;&#123; flex: 1 &#125;&#125;&gt;</div><div class="line">          &lt;ScrollView</div><div class="line">            style=&#123;&#123; flex: 1 &#125;&#125;</div><div class="line">            contentContainerStyle=&#123;&#123; flex: 1 &#125;&#125;</div><div class="line">            showsVerticalScrollIndicator=&#123;false&#125;</div><div class="line">            automaticallyAdjustContentInsets=&#123;false&#125;</div><div class="line">          &gt;</div><div class="line">            &lt;TouchableOpacity</div><div class="line">              style=&#123;styles.empty&#125;</div><div class="line">              onPress=&#123;() =&gt; this.closeModal()&#125;&gt;</div><div class="line">            &lt;/TouchableOpacity&gt;</div><div class="line">            &#123;</div><div class="line">              IsAndroid ?</div><div class="line">                &lt;View&gt;</div><div class="line">                  &#123;this.renderContent()&#125;</div><div class="line">                &lt;/View&gt; :</div><div class="line">                this.renderContent()</div><div class="line">            &#125;</div><div class="line">          &lt;/ScrollView&gt;</div><div class="line">        &lt;/View&gt;</div><div class="line">      &lt;/Modal&gt;</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;KeyboardAvoidingView&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line">&lt;KeyboardAvoidingView</div><div class="line">  style=&#123;&#123; <span class="attr">paddingBottom</span>: IsAndroid ? <span class="number">260</span> * heightScale : <span class="number">160</span> * widthScale &#125;&#125;</div><div class="line">  behavior=&#123;IsAndroid ? <span class="string">'padding'</span> : <span class="string">'position'</span>&#125;&gt;</div><div class="line">  &#123;children&#125;</div><div class="line">&lt;<span class="regexp">/KeyboardAvoidingView&gt;</span></div></pre></td></tr></table></figure>
<h3 id="19-Image-dimension"><a href="#19-Image-dimension" class="headerlink" title="19.Image dimension"></a>19.Image dimension</h3><p>Image source如果是本地，需要设置width,或者height.</p>
<h3 id="19-1-本地图片"><a href="#19-1-本地图片" class="headerlink" title="19.1 本地图片"></a>19.1 本地图片</h3><h4 id="19-1-1-只设置width，或者只设置height-然后加上resizeMode-’contain’"><a href="#19-1-1-只设置width，或者只设置height-然后加上resizeMode-’contain’" class="headerlink" title="19.1.1 只设置width，或者只设置height,然后加上resizeMode:’contain’"></a>19.1.1 只设置width，或者只设置height,然后加上resizeMode:’contain’</h4><p>之前这么用，大部分没什么问题，但是如果这样用，图片显示没问题，但是图片占用的空间不是显示的大小。比如图片大小是100*50,<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Image style=&#123;&#123;<span class="attr">width</span>:<span class="number">80</span>,<span class="attr">resizeMode</span>:<span class="string">'contain'</span>&#125;&#125; source=&#123;<span class="built_in">require</span>(...)&#125;&gt;</div></pre></td></tr></table></figure></p>
<p>如上，没有设置height,但是这个Image的实际高度是50,然后垂直居中显示。这样导致图片的相邻元素的位置不对。</p>
<h4 id="19-2-网络图片"><a href="#19-2-网络图片" class="headerlink" title="19.2 网络图片"></a>19.2 网络图片</h4><h4 id="19-2-1-使用Image-getSize-url-width-height-gt-error-gt"><a href="#19-2-1-使用Image-getSize-url-width-height-gt-error-gt" class="headerlink" title="19.2.1 使用Image.getSize(url, (width,height)=&gt;{}, error=&gt;{})"></a>19.2.1 使用Image.getSize(url, (width,height)=&gt;{}, error=&gt;{})</h4><p>在回调中setState({widht, height})</p>
<h4 id="19-2-2-使用flex-1-或者-position-’absolute’"><a href="#19-2-2-使用flex-1-或者-position-’absolute’" class="headerlink" title="19.2.2 使用flex:1 或者 position=’absolute’"></a>19.2.2 使用flex:1 或者 position=’absolute’</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 注意：容器中不能设置justifyContent和alignItems,不然图片不显示</span></div><div class="line">&lt;Image source=&#123;&#123;<span class="attr">uri</span>: url&#125;&#125; style=&#123;&#123;<span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">width</span>: <span class="literal">null</span>, <span class="attr">height</span>: <span class="literal">null</span>&#125;&#125; resizeMode=<span class="string">'contain'</span>/&gt;</div><div class="line"></div><div class="line"><span class="comment">//使用position='absolute'</span></div><div class="line">&lt;Image source=&#123;&#123;<span class="attr">uri</span>: url&#125;&#125; style=&#123;&#123;<span class="attr">position</span>: <span class="string">'absolute'</span>, <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">right</span>: <span class="number">0</span>, <span class="attr">bottom</span>: <span class="number">0</span>&#125;&#125; resizeMode=<span class="string">'contain'</span>/&gt;</div></pre></td></tr></table></figure>
<p>如果Image的height，width不固定，用Image.getSize回调。如果容器size固定(不一定有width,height，而是可以是flex布局)，用flex:1或posiiton=’absolute’。</p>
<blockquote>
<p>注意本地图片如果也这么用，最好在外面加上一个View作为container, 这个container使用absolute或者flex:1。</p>
</blockquote>
<h3 id="20-tricky-of-ListView"><a href="#20-tricky-of-ListView" class="headerlink" title="20. tricky of ListView"></a>20. tricky of ListView</h3><p>ListView在ScrollView中，那么ListView不设置style={flex:1}, 那么ListView 和ScrollView的滑动事件很完美结合，表现为整体滑动。react-native-web中，Chrome表现和mobile一样，safari不行，ListView的父节点必须有个高度，手工计算它的高度，这个高度必须大于等于ListView content 的height, 那样滑动起来就像是一个整体，不然就会是局部滑动。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;ScrollView&gt;</div><div class="line">  &lt;View style=&#123;&#123;flex:1&#125;&#125; &#123;/*这个flex:1在mobile app和chrome环境下会忽视，但是safari不行 */&#125;&gt; </div><div class="line">    &lt;ListView</div><div class="line">      dataSource=&#123;dataSource&#125;</div><div class="line">      renderRow=&#123;this.renderRow&#125;</div><div class="line">    /&gt;</div><div class="line">  &lt;/View&gt;</div><div class="line">&lt;/ScrollView&gt;</div></pre></td></tr></table></figure></p>
<h3 id="21-react-native-run-android真机调试"><a href="#21-react-native-run-android真机调试" class="headerlink" title="21. react-native run-android真机调试"></a>21. react-native run-android真机调试</h3><p>Failed to install all. run-android on device<br>一种情况是真机没连上或者同时开了模拟器<br>第二种就是要这样执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">adb devices</div><div class="line">List of devices attached</div><div class="line">85EABNGMFABC    device</div><div class="line"></div><div class="line">react-native run-android --deviceId 85EABNGMFABC <span class="comment">#这样可以成功安装到真机</span></div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/facebook/react-native/issues/9498" target="_blank" rel="external">github issue</a></p>
<h3 id="22-flex布局中，子元素的宽高度"><a href="#22-flex布局中，子元素的宽高度" class="headerlink" title="22. flex布局中，子元素的宽高度"></a>22. flex布局中，子元素的宽高度</h3><h4 id="22-1-flexDirection-’column’"><a href="#22-1-flexDirection-’column’" class="headerlink" title="22.1 flexDirection:’column’"></a>22.1 flexDirection:’column’</h4><p>子元素的宽度通常内容决定的，高度是固定高度或flex布局。</p>
<h4 id="22-2-flexDirection-‘row’"><a href="#22-2-flexDirection-‘row’" class="headerlink" title="22.2 flexDirection: ‘row’"></a>22.2 flexDirection: ‘row’</h4><p>子元素的高度通常是<strong>容器高度</strong>，宽度是固定宽度或flex布局。但这个有意外，可能是父容器设置了<code>alignItems:&#39;center&#39;</code>，所以当此时子元素高度不是父容器高度时，按需要可以设置<code>alignSelf:&#39;stretch&#39;</code>。</p>
<h4 id="22-3-alignItmes-’center’-flexDirection-’column’"><a href="#22-3-alignItmes-’center’-flexDirection-’column’" class="headerlink" title="22.3 alignItmes:’center’, flexDirection:’column’"></a>22.3 alignItmes:’center’, flexDirection:’column’</h4><p><code>marginLeft: 20</code>，实际偏移10，因为alignItems:’center’的原因。这个是layout，影响占有空间。<br><code>left:10</code>,实际偏移10。left一般和position:’relative’和position:’absolute’一起使用。注意在relative时候，原有位置空间不会消失。也会影响占有空间。</p>
<h4 id="23-lipo-ios的库查询"><a href="#23-lipo-ios的库查询" class="headerlink" title="23. lipo ios的库查询"></a>23. lipo ios的库查询</h4><p>有时候第三方sdk不支持x86_64（模拟器architecture),所以不能在模拟器上运行。查看skd支持的cpu的architecture，lipo -inof xxsdk.o</p>
<blockquote>
<p>ios release app, Project-&gt;Build Settings-&gt;Build Acitve Architecture Only,在release下是false,表示build出的.iap支持多个CPU架构。而通常debug下我们只需要x86_64（模拟器）的CPU架构就够了，或者当前真机的CPU架构。</p>
</blockquote>
<h4 id="24-js-class-vs-object"><a href="#24-js-class-vs-object" class="headerlink" title="24. js class vs object"></a>24. js class vs object</h4><blockquote>
<p>区别就是有没有逗号<br>如果是class<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</div><div class="line">  fun1 = (a)&#123;</div><div class="line">    <span class="built_in">console</span>.warn(a)</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//没有逗号','</span></div><div class="line">  fun2 = (b)&#123;</div><div class="line">    <span class="built_in">console</span>.warn(b)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>如果是object<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> A = &#123;</div><div class="line">  fun1(a)&#123;</div><div class="line">    <span class="built_in">console</span>.warn(a)</div><div class="line">  &#125;,</div><div class="line">  fun2(b)&#123;</div><div class="line">    <span class="built_in">console</span>.warn(b)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="25-android-build-error-with"><a href="#25-android-build-error-with" class="headerlink" title="25. android build error with"></a>25. android build error with</h3><p>发现自己写的react-native inmobi广告模块有问题，build.gradle的build tools版本不匹配<br>解决，使用和主build tool一致的版本号<br>造成冲突的原因，应该是此模块和主程序都使用了支持包</p>
<p>主build.gradle</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">25</span></div><div class="line">    buildToolsVersion <span class="string">"25.0.2"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        minSdkVersion <span class="number">16</span></div><div class="line">        targetSdkVersion <span class="number">22</span></div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    ...</div><div class="line">    <span class="keyword">compile</span> <span class="string">"com.android.support:appcompat-v7:23.0.1"</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>react-native第三方模块的build.gradle<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">23</span></div><div class="line">    buildToolsVersion <span class="string">"23.0.1"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        minSdkVersion <span class="number">16</span></div><div class="line">        targetSdkVersion <span class="number">22</span></div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"></div><div class="line">ext &#123;</div><div class="line">    androidSupportLibVersion = <span class="string">"23.0.1"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    ...</div><div class="line">    <span class="keyword">compile</span> <span class="string">"com.android.support:design:$&#123;androidSupportLibVersion&#125;"</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">"com.android.support:appcompat-v7:$&#123;androidSupportLibVersion&#125;"</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">"com.android.support:recyclerview-v7:$&#123;androidSupportLibVersion&#125;"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>修改第三方模块的build.gradle<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> android &#123;</div><div class="line">-    compileSdkVersion <span class="number">23</span></div><div class="line">-    buildToolsVersion <span class="string">"23.0.1"</span></div><div class="line">+    compileSdkVersion <span class="number">25</span> <span class="comment">//改成和主build.gradle一样</span></div><div class="line">+    buildToolsVersion <span class="string">"25.0.2"</span> <span class="comment">//改成和主build.gradle一样</span></div><div class="line"> </div><div class="line">     defaultConfig &#123;</div><div class="line">         minSdkVersion <span class="number">16</span></div><div class="line">        targetSdkVersion <span class="number">22</span></div><div class="line">     &#125;</div></pre></td></tr></table></figure></p>
<h3 id="26-读取Anroid的AndroidManifest-xml中的meta-data"><a href="#26-读取Anroid的AndroidManifest-xml中的meta-data" class="headerlink" title="26.读取Anroid的AndroidManifest.xml中的meta-data"></a>26.读取Anroid的AndroidManifest.xml中的meta-data</h3><p>meta-data的值读的时候不会自动类型转换，比如你要一个String,实际value是一个float，那么就会报警，返回一个null。<br>比如build.gradle中SomeValue值类型是int,那么AndroidMainfest.xml中的”${SomeValue}就是int,读取时就不能用getString.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//metaData.getString如果读到了float就会报警告，返回一个null</span></div><div class="line">metaData.get(metaDataKey).toString();</div></pre></td></tr></table></figure></p>
<p>我遇到的是grovey的问题，它读取一个Long的值，toString时变成了科学计数法，没有办法就只有加个前缀了，我觉得它应该有个方法toString时是直接String，不改变表示方法的。</p>
<h3 id="27-map不返回"><a href="#27-map不返回" class="headerlink" title="27.map不返回"></a>27.map不返回</h3><p>我有时遇到map使用的时候，不加return,导致页面不显示。跟lambada时更加要注意，是<code>=&gt;()</code>还是<code>=&gt;{}</code>。</p>
<h3 id="28-Component-bind-this"><a href="#28-Component-bind-this" class="headerlink" title="28.Component bind this"></a>28.Component bind this</h3><p>Component中的回调如果是用了this.props或者<strong>this.renderxxx()</strong>，都是需要bind this的。</p>
<h3 id="29-padStart-6-‘’"><a href="#29-padStart-6-‘’" class="headerlink" title="29. padStart(6, ‘’)"></a>29. padStart(6, ‘’)</h3><p>Android对TypeScript<code>padStart(6, &#39;&#39;)</code>不支持，还是改用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="string">"0000"</span>+str).slice(<span class="number">-4</span>)</div></pre></td></tr></table></figure></p>
<h3 id="30-lineHeight"><a href="#30-lineHeight" class="headerlink" title="30. lineHeight"></a>30. lineHeight</h3><p>Android的lineHeight要求是Integer，不能是Double。IOS没问题。</p>
<h3 id="31-StyleSheet-hairlineWidth"><a href="#31-StyleSheet-hairlineWidth" class="headerlink" title="31. StyleSheet.hairlineWidth"></a>31. StyleSheet.hairlineWidth</h3><p>这个在iPhone5上，不能和backgroundColor一起使用。所以当前View不设backgroundColor,父容器设置backgroundColor。</p>
<h3 id="32-react-native-svg-ui-polish"><a href="#32-react-native-svg-ui-polish" class="headerlink" title="32. react-native-svg ui polish"></a>32. react-native-svg ui polish</h3><p>在Android平台，如果svg使用width: 12 * widthScale，那么可能出现icon的截边，所以使用固定宽度 6 来解决。</p>
<h3 id="33-genymotion-修改时区"><a href="#33-genymotion-修改时区" class="headerlink" title="33. genymotion 修改时区"></a>33. genymotion 修改时区</h3><p>运行<code>adb shell</code>进入Android的shell环境。<br>查看当前时区 cat /data/property/persist.sys.timezone<br>修改当前时区 setprop persist.sys.timezone Asia/Shanghai</p>
<h3 id="34-ScrollView-tricky"><a href="#34-ScrollView-tricky" class="headerlink" title="34. ScrollView tricky"></a>34. ScrollView tricky</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;View style=&#123;styles.flexOne&#125;&gt;</div><div class="line">    &lt;ScrollView</div><div class="line">      style=&#123;styles.flexOne&#125;</div><div class="line">      showsVerticalScrollIndicator=&#123;false&#125;</div><div class="line">      scrollEventThrottle=&#123;16&#125;&gt;</div><div class="line">      &lt;View style=&#123;&#123; flex: 1, alignItems: 'center' &#125;&#125;&gt;</div><div class="line">        &#123;matchUp&#125;</div><div class="line">        &#123;answersBox&#125;</div><div class="line">      &lt;/View&gt;</div><div class="line">      &#123;this.renderFooter()&#125;</div><div class="line">    &lt;/ScrollView&gt;</div><div class="line">&lt;<span class="regexp">/View&gt;</span></div></pre></td></tr></table></figure>
<p>注意这里不能设置contentContainerStyle的高度或者flex,这个是内容撑开的。但是这里奇怪的地方是ScrollView内部的第一View用的是flex:1,这个flex:1对应的是ScrollView的高度，不是contentContainerStyle的高度，有点像minHeight。 所以renderFooter（）就会在内容不够长的时候在底部。内容足够长的时候在可以滑动下面。</p>
<h3 id="35-tips"><a href="#35-tips" class="headerlink" title="35. tips"></a>35. tips</h3><ul>
<li><ol>
<li>minHeight对于不同内容而保存相同布局有奇效</li>
</ol>
</li>
<li><ol>
<li>注意action要是绑定后的action，而不是原始的action.就是要有dispatch。</li>
</ol>
</li>
<li><ol>
<li>请求时主要refreshing字段的使用，变换authToken要强制刷新。</li>
</ol>
</li>
</ul>
<h3 id="36-flexWrap-‘wrap’-flexDirection-‘row’"><a href="#36-flexWrap-‘wrap’-flexDirection-‘row’" class="headerlink" title="36. flexWrap: ‘wrap’, flexDirection: ‘row’"></a>36. flexWrap: ‘wrap’, flexDirection: ‘row’</h3><p>我之前这么用, container有个<code>containerWidth</code>，item的<code>itemWidth</code>就是containerWidth / columns,看似没问题，但是在IphonePlus或者其它情况下，itemWidth的值四舍五入了，和加在一起大于contaienrWidth，那么就换行了。<br>解决方法：</p>
<ul>
<li>itemWidth = Math.floor(containerWidth / columns)</li>
<li>itemWidth的值小于contaienrWidth，itemWidth = (containerWidth - 10) / columns, 然后container的style, justifyContent: ‘space-between’, alignItems: ‘center, 但是要注意不能太小，以致一行比原来可以多放一个item.</li>
</ul>
<p>推荐第一种方法</p>
<h3 id="37-在reduce中使用state-mergeDeep"><a href="#37-在reduce中使用state-mergeDeep" class="headerlink" title="37. 在reduce中使用state.mergeDeep"></a>37. 在reduce中使用state.mergeDeep</h3><p>immutable mergeDeep(action.payload), 如果action.payload中有数组，那么是不会merge成功的(只有新的数组，没有旧的数组)，所以我直接返回了fromJS(action.payload),这个对参数有要求，就是要全面。</p>
<h3 id="38-ToucchableOpacity-vs-TouchableWithoutFeedback"><a href="#38-ToucchableOpacity-vs-TouchableWithoutFeedback" class="headerlink" title="38. ToucchableOpacity vs TouchableWithoutFeedback"></a>38. ToucchableOpacity vs TouchableWithoutFeedback</h3><p>TouchableOpacity如果设置activityOpacity={1},那么表现和TouchableWithoutFeedback.</p>
<h4 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h4><ul>
<li>TouchableOpacity布局上更像是View，没有children也可以，TouchableWithoutFeedback必须要有个children，children不能为空。</li>
<li>在容器flexWrap:’wrap’,TouchableWithoutFeedback中不能正常显示，使用TouchableOpacity能正常显示。所以TouchableOpacity更像View，而TouchableWithoutFeedback布局功能有所欠缺。</li>
</ul>
<h3 id="39-border-虚线"><a href="#39-border-虚线" class="headerlink" title="39. border 虚线"></a>39. border 虚线</h3><p>RN 支持borderStyle: ‘dotted’，所以不需要用图片来代替虚线了。</p>
<h3 id="40-Text"><a href="#40-Text" class="headerlink" title="40. Text"></a>40. Text</h3><p>RN Text的默认字体大小是12.</p>
<h3 id="41-TouchableOpacity-TouchableWithouFeedback的onPress回调函数"><a href="#41-TouchableOpacity-TouchableWithouFeedback的onPress回调函数" class="headerlink" title="41. TouchableOpacity, TouchableWithouFeedback的onPress回调函数"></a>41. TouchableOpacity, TouchableWithouFeedback的onPress回调函数</h3><p>我遇到一个错误，<code>Malformed call from JS: field size are different</code><br>原因是给react-native-navigation的navigator传错参数了。<br>它们的回调函数有参数event,比如我定义一个<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">onPressHandler =<span class="function">(<span class="params">title</span>)=&gt;</span>&#123;</div><div class="line">  <span class="keyword">this</span>.props.jump(<span class="string">'xxx.xx'</span>, &#123;title&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里的title应该是一个string，但是实参是一个event的对象。所以在闭包中，一定要注意默认参数，比如onPress的。</p>
<h3 id="42-Trying-to-add-a-‘RCTRawText-text-gt-’-to-a-‘RCTView’"><a href="#42-Trying-to-add-a-‘RCTRawText-text-gt-’-to-a-‘RCTView’" class="headerlink" title="42. Trying to add a ‘RCTRawText [text: &gt;]’ to a ‘RCTView’"></a>42. Trying to add a ‘RCTRawText [text: &gt;]’ to a ‘RCTView’</h3><p>这个是因为在JSX语法中，多了一个’&gt;’,这个是写代码不小心造成的。JSX所有代码都要在标签里。Android会导致crash,iOS不会crash.改正习惯<code>&gt;</code>不能单独一行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//crash示例</span></div><div class="line">render()&#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;View</div><div class="line">      style=&#123;styles.container&#125;&gt;</div><div class="line">      &gt; //culprit</div><div class="line">      &lt;Text&gt;示例&lt;/Text&gt;</div><div class="line">    &lt;/View&gt;</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="43-模块设计"><a href="#43-模块设计" class="headerlink" title="43. 模块设计"></a>43. 模块设计</h3><ul>
<li>不用使用一个Page(Container)来共享逻辑，这让重构复杂。</li>
<li>有时候我想用数据代替逻辑处理props，比如数据model中有个字段是type,那么使用这个model时就可以自处理，而不用把逻辑(用props传递函数)从外部传入。增加数据的自描述能力，功能函数尽量无状态。</li>
<li>有顺序要求，使用Array，不用Object,因为Object.Keys()的顺序不是guaranntee。</li>
</ul>
<h3 id="44-RN中使用setImmediate"><a href="#44-RN中使用setImmediate" class="headerlink" title="44. RN中使用setImmediate"></a>44. RN中使用setImmediate</h3><p>好像和browser、node中的表现不完全一样。相同的部分都是在执行栈结束后添加事件到任务队列。<br>不同点:</p>
<ul>
<li>browser、node中嵌套的setImmediate会在两个EventLoop中执行</li>
<li>RN中嵌套的setImmediate还是会在同一个EventLoop中执行，来自官网0.56版本。</li>
</ul>
<blockquote>
<p>TODO: setTImeout在app后台运行时应该也是起效的。被OS杀死就是重置了。</p>
</blockquote>
<h3 id="45-iOS的启动脚本中的-bin-sh"><a href="#45-iOS的启动脚本中的-bin-sh" class="headerlink" title="45. iOS的启动脚本中的/bin/sh"></a>45. iOS的启动脚本中的/bin/sh</h3><p><a href="https://apple.stackexchange.com/questions/208408/profile-is-not-loaded-on-non-login-bin-sh" target="_blank" rel="external">https://apple.stackexchange.com/questions/208408/profile-is-not-loaded-on-non-login-bin-sh</a></p>
<blockquote>
<p>/bin/sh速度比/bin/bash要快，但是/bin/sh只有登录的session有读取~/.profile，其它的session是不读~/.profile。所以加上env ENV=$HOME/.profile /bin/sh<br>我遇到的问题好像是node在xcode的Bundle React Native code and images中没能识别node<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> NODE_BINARY=node</div><div class="line">../node_modules/react-native/scripts/react-native-xcode.sh</div></pre></td></tr></table></figure></p>
</blockquote>
<p>一开始我是想给sh加上node环境，发现其实我的sh是有node的，但是没有nvm，我以为是nvm问题，后来发现不是nvm的问题，而是我的sh的node不是nvm管理的node路径，是有brew安装yarn是安装了一个node的10.x的版本，解决方案:先卸载yarn，brew uninstall yarn,然后brew install yarn –without-node，发现环境现在OK了，sh不需要nvm,只需要node。</p>
<p><a href="https://www.cnblogs.com/EasonJim/p/6850319.html" target="_blank" rel="external">https://www.cnblogs.com/EasonJim/p/6850319.html</a></p>
<h3 id="46-xcode-的文件夹Group和Reference"><a href="#46-xcode-的文件夹Group和Reference" class="headerlink" title="46. xcode 的文件夹Group和Reference"></a>46. xcode 的文件夹Group和Reference</h3><ul>
<li><p>xcode创建Resources时，用的Create Group with folder,右侧属性 Location是relative to Grup.这种是没有文件夹，只是一个引用，相当于内部的一个软连接，因为在项目文件夹下是看不到这Resources的。</p>
</li>
<li><p>add Files一般的文件，可以选择Group和Reference,Group是黄色的，Reference是蓝色的。一般勾上”Copy Items if needed”</p>
</li>
<li><p>添加项目，用add Files，我是用的Reference,选中的项目文件.xcodeproj。</p>
</li>
</ul>
<h3 id="47-Text不占满父元素"><a href="#47-Text不占满父元素" class="headerlink" title="47.Text不占满父元素"></a>47.Text不占满父元素</h3><p>设置父元素<code>alignItems: &#39;flex-start&#39;</code>,因为默认父元素是<code>alignItems: &#39;stretch&#39;</code>。</p>
<h3 id="48-Malformed-calls-from-JS-field-sizes-are-different"><a href="#48-Malformed-calls-from-JS-field-sizes-are-different" class="headerlink" title="48.  Malformed calls from JS: field sizes are different."></a>48.  Malformed calls from JS: field sizes are different.</h3><p>这个是JS调用函数时的参数类型不对，检查参数类型。</p>
<h3 id="50-尽量不适用数组的index作为key"><a href="#50-尽量不适用数组的index作为key" class="headerlink" title="50.尽量不适用数组的index作为key"></a>50.尽量不适用数组的index作为key</h3><p>iOS上Google地图上的markers会有闪烁的问题，一开始我以为是原生地图的绘制问题。后来我发现是<marker>的key设置问题，我使用了数组的index，但是当新的markers数组请求到，用的还是同一个index，所以Dom diff时候，<marker>会漂移，因为被当做了同一个组件（相同的key）。我一开始是在fetch的onSuccess的callback中手动关闭Callout，但是体验不好，Callout会消失，需要重新点开，最好在请求结束后保持打开状态，也就是组件不要被Dom diff后替代。<br>解决方案：使用maker的_id作为key,这是mongoDB的存储键，是唯一的，完美解决闪烁问题。Dom diff效率还是很高的,选择合适的key会解决这种漂移闪烁问题。</marker></marker></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/debug/" rel="tag"># debug</a>
          
            <a href="/tags/react-native/" rel="tag"># react-native</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/07/13/mac-apache2/" rel="prev" title="mac-apache2">
                mac-apache2 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="qsl" />
          <p class="site-author-name" itemprop="name">qsl</p>
           
              <p class="site-description motion-element" itemprop="description">technology, web, js</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">40</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Image-overflow"><span class="nav-number">1.</span> <span class="nav-text">1. Image overflow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-flex-layout"><span class="nav-number">2.</span> <span class="nav-text">2. flex layout</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-yoga"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 yoga</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-BFC"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 BFC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-RN-CSS继承"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 RN CSS继承</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-RN-flex"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 RN flex</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-1父节点-gt-子节点"><span class="nav-number">2.4.1.</span> <span class="nav-text">2.4.1父节点->子节点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-2-父节点flex-1"><span class="nav-number">2.4.2.</span> <span class="nav-text">2.4.2 父节点flex:1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-3-父节点absolute-子节点flex-1"><span class="nav-number">2.4.3.</span> <span class="nav-text">2.4.3 父节点absolute,子节点flex:1</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-style覆盖"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 style覆盖</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-postion-absolute"><span class="nav-number">3.</span> <span class="nav-text">3. postion:absolute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Text"><span class="nav-number">4.</span> <span class="nav-text">4. Text</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-borderRadius"><span class="nav-number">5.</span> <span class="nav-text">5. borderRadius</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-setState"><span class="nav-number">6.</span> <span class="nav-text">6. setState</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-ListView-中的onEndReached"><span class="nav-number">7.</span> <span class="nav-text">7. ListView 中的onEndReached</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-子组件和父组件通讯问题"><span class="nav-number">8.</span> <span class="nav-text">8.子组件和父组件通讯问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-ref调用共有方法"><span class="nav-number">9.</span> <span class="nav-text">9.ref调用共有方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-继承和组合"><span class="nav-number">10.</span> <span class="nav-text">10.继承和组合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-requestAnimationFrame"><span class="nav-number">11.</span> <span class="nav-text">11.requestAnimationFrame</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-gitignore"><span class="nav-number">12.</span> <span class="nav-text">12. .gitignore</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-import-require外部文件"><span class="nav-number">13.</span> <span class="nav-text">13. import require外部文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-Text-布局"><span class="nav-number">14.</span> <span class="nav-text">14. Text 布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-Text-宽度"><span class="nav-number">15.</span> <span class="nav-text">14.1 Text 宽度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#14-2-Text中嵌套View-要设置width-height"><span class="nav-number">15.1.</span> <span class="nav-text">14.2 Text中嵌套View,要设置width,height</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#14-3-Text在View中布局"><span class="nav-number">15.2.</span> <span class="nav-text">14.3 Text在View中布局</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-yield"><span class="nav-number">16.</span> <span class="nav-text">15. yield</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-moment-format-‘M-D’"><span class="nav-number">17.</span> <span class="nav-text">17. moment format ‘M-D’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-键盘"><span class="nav-number">18.</span> <span class="nav-text">18. 键盘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-Image-dimension"><span class="nav-number">19.</span> <span class="nav-text">19.Image dimension</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-1-本地图片"><span class="nav-number">20.</span> <span class="nav-text">19.1 本地图片</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#19-1-1-只设置width，或者只设置height-然后加上resizeMode-’contain’"><span class="nav-number">20.1.</span> <span class="nav-text">19.1.1 只设置width，或者只设置height,然后加上resizeMode:’contain’</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#19-2-网络图片"><span class="nav-number">20.2.</span> <span class="nav-text">19.2 网络图片</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#19-2-1-使用Image-getSize-url-width-height-gt-error-gt"><span class="nav-number">20.3.</span> <span class="nav-text">19.2.1 使用Image.getSize(url, (width,height)=>{}, error=>{})</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#19-2-2-使用flex-1-或者-position-’absolute’"><span class="nav-number">20.4.</span> <span class="nav-text">19.2.2 使用flex:1 或者 position=’absolute’</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-tricky-of-ListView"><span class="nav-number">21.</span> <span class="nav-text">20. tricky of ListView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-react-native-run-android真机调试"><span class="nav-number">22.</span> <span class="nav-text">21. react-native run-android真机调试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-flex布局中，子元素的宽高度"><span class="nav-number">23.</span> <span class="nav-text">22. flex布局中，子元素的宽高度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#22-1-flexDirection-’column’"><span class="nav-number">23.1.</span> <span class="nav-text">22.1 flexDirection:’column’</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#22-2-flexDirection-‘row’"><span class="nav-number">23.2.</span> <span class="nav-text">22.2 flexDirection: ‘row’</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#22-3-alignItmes-’center’-flexDirection-’column’"><span class="nav-number">23.3.</span> <span class="nav-text">22.3 alignItmes:’center’, flexDirection:’column’</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#23-lipo-ios的库查询"><span class="nav-number">23.4.</span> <span class="nav-text">23. lipo ios的库查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#24-js-class-vs-object"><span class="nav-number">23.5.</span> <span class="nav-text">24. js class vs object</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-android-build-error-with"><span class="nav-number">24.</span> <span class="nav-text">25. android build error with</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-读取Anroid的AndroidManifest-xml中的meta-data"><span class="nav-number">25.</span> <span class="nav-text">26.读取Anroid的AndroidManifest.xml中的meta-data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#27-map不返回"><span class="nav-number">26.</span> <span class="nav-text">27.map不返回</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#28-Component-bind-this"><span class="nav-number">27.</span> <span class="nav-text">28.Component bind this</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#29-padStart-6-‘’"><span class="nav-number">28.</span> <span class="nav-text">29. padStart(6, ‘’)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#30-lineHeight"><span class="nav-number">29.</span> <span class="nav-text">30. lineHeight</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#31-StyleSheet-hairlineWidth"><span class="nav-number">30.</span> <span class="nav-text">31. StyleSheet.hairlineWidth</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#32-react-native-svg-ui-polish"><span class="nav-number">31.</span> <span class="nav-text">32. react-native-svg ui polish</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#33-genymotion-修改时区"><span class="nav-number">32.</span> <span class="nav-text">33. genymotion 修改时区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#34-ScrollView-tricky"><span class="nav-number">33.</span> <span class="nav-text">34. ScrollView tricky</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#35-tips"><span class="nav-number">34.</span> <span class="nav-text">35. tips</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#36-flexWrap-‘wrap’-flexDirection-‘row’"><span class="nav-number">35.</span> <span class="nav-text">36. flexWrap: ‘wrap’, flexDirection: ‘row’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-在reduce中使用state-mergeDeep"><span class="nav-number">36.</span> <span class="nav-text">37. 在reduce中使用state.mergeDeep</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#38-ToucchableOpacity-vs-TouchableWithoutFeedback"><span class="nav-number">37.</span> <span class="nav-text">38. ToucchableOpacity vs TouchableWithoutFeedback</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不同点"><span class="nav-number">37.1.</span> <span class="nav-text">不同点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-border-虚线"><span class="nav-number">38.</span> <span class="nav-text">39. border 虚线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#40-Text"><span class="nav-number">39.</span> <span class="nav-text">40. Text</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#41-TouchableOpacity-TouchableWithouFeedback的onPress回调函数"><span class="nav-number">40.</span> <span class="nav-text">41. TouchableOpacity, TouchableWithouFeedback的onPress回调函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#42-Trying-to-add-a-‘RCTRawText-text-gt-’-to-a-‘RCTView’"><span class="nav-number">41.</span> <span class="nav-text">42. Trying to add a ‘RCTRawText [text: >]’ to a ‘RCTView’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#43-模块设计"><span class="nav-number">42.</span> <span class="nav-text">43. 模块设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#44-RN中使用setImmediate"><span class="nav-number">43.</span> <span class="nav-text">44. RN中使用setImmediate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#45-iOS的启动脚本中的-bin-sh"><span class="nav-number">44.</span> <span class="nav-text">45. iOS的启动脚本中的/bin/sh</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#46-xcode-的文件夹Group和Reference"><span class="nav-number">45.</span> <span class="nav-text">46. xcode 的文件夹Group和Reference</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#47-Text不占满父元素"><span class="nav-number">46.</span> <span class="nav-text">47.Text不占满父元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#48-Malformed-calls-from-JS-field-sizes-are-different"><span class="nav-number">47.</span> <span class="nav-text">48.  Malformed calls from JS: field sizes are different.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#50-尽量不适用数组的index作为key"><span class="nav-number">48.</span> <span class="nav-text">50.尽量不适用数组的index作为key</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qsl</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://edwardqian.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://yoursite.com/2017/07/08/React-Native-Debug/';
          this.page.identifier = '2017/07/08/React-Native-Debug/';
          this.page.title = 'React-Native-Debug';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://edwardqian.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  








  





  

  

  

  

  

  

</body>
</html>
